html, body, #map { height: 100%; margin: 0; padding: 0; }
body { background:#0b1220; color:#fff; font-family: system-ui, -apple-system, "Segoe UI", Roboto, Arial, sans-serif; }
#map { position: relative; z-index: 0; }

/* لوحة التحرير */
.panel { position: fixed; bottom: 14px; inset-inline-start: 14px; width: min(360px, calc(100% - 28px));
  background: linear-gradient(180deg, rgba(24,28,44,.72), rgba(24,28,44,.55)); backdrop-filter: blur(12px);
  -webkit-backdrop-filter: blur(12px); border:1px solid rgba(255,255,255,.12); border-radius:16px;
  box-shadow:0 10px 28px rgba(0,0,0,.45); padding:12px 14px; z-index:5; }
.panel.hidden { display:none; }
.panel h3 { margin:0 0 8px; font-size:.98rem; }
.panel .row { display:flex; align-items:center; gap:8px; margin:6px 0; font-size:.94rem; }
.panel .sep { height:1px; background:rgba(255,255,255,.12); margin:10px 0; }
.panel select, .panel input[type="color"], .panel input[type="range"] { flex:1; }

/* أزرار */
.btn { appearance:none; border:1px solid rgba(255,255,255,.18); background:rgba(217,180,107,.2); color:#f8fafc;
  padding:9px 10px; border-radius:12px; cursor:pointer; font-size:.96rem; font-weight:600; }
.btn:hover { background:rgba(217,180,107,.28); }
.btn.small { padding:7px 10px; font-size:.9rem; }
.btn.ghost { background:transparent; }

/* زر حركة المرور */
.floating-btn{ position:fixed; top:14px; inset-inline-start:14px; background:rgba(20,24,38,.65);
  backdrop-filter: blur(10px); -webkit-backdrop-filter: blur(10px); color:#e5f0ff; border:1px solid rgba(255,255,255,.12);
  padding:8px 10px; border-radius:12px; z-index:5; cursor:pointer; box-shadow:0 6px 18px rgba(0,0,0,.35); font-size:.9rem; }
.floating-btn[aria-pressed="true"]{ background: rgba(59,130,246,.25); }

/* الكرت */
.card { position:fixed; top:56px; inset-inline-end:12px; width:min(360px, calc(100% - 24px));
  background: linear-gradient(180deg, rgba(24,28,44,.7), rgba(24,28,44,.55)); backdrop-filter: blur(12px);
  -webkit-backdrop-filter: blur(12px); border:1px solid rgba(255,255,255,.12); border-radius:16px;
  box-shadow:0 10px 28px rgba(0,0,0,.45); padding:16px 16px 12px; z-index:5;
  transform: translateY(-6px); opacity:0; pointer-events:none; transition: transform .2s ease, opacity .2s ease; }
.card:not(.hidden){ transform: translateY(0); opacity:1; pointer-events:auto; }
.card.hidden { display:block; }
.card h3 { margin:0 0 6px; font-size:1.08rem; font-weight:800; color:#fff; }
.card .meta { margin:0 0 8px; font-size:.86rem; color:#cbd5e1; }
.card .row { display:grid; grid-template-columns: 1fr auto; gap:8px; align-items:center; font-size:.92rem;
  padding:6px 0; border-top:1px dashed rgba(255,255,255,.12); }
.card .row:first-of-type { border-top:0; }
.card .close { position:absolute; top:6px; inset-inline-start:8px; appearance:none; border:0; background:transparent; color:#e2e8f0;
  font-size:20px; line-height:1; cursor:pointer; }
.card .close:hover { color:#fff; }
.card .brand{ position:absolute; top:8px; inset-inline-end:10px; width:46px; height:46px; object-fit:contain; opacity:.95;
  filter: drop-shadow(0 1px 2px rgba(0,0,0,.35)); pointer-events:none; }

/* المحرر */
.actions { margin-top:10px; display:flex; gap:8px; justify-content:flex-end; }
.actions.hidden { display:none; }
.editor{ position:fixed; inset:0; z-index:7; display:grid; place-items:center; background: rgba(0,0,0,.45); backdrop-filter: blur(2px); }
.editor.hidden{ display:none; }
.editor-box{ width:min(520px, calc(100% - 32px)); background: rgba(24,28,44,.9); color:#f8fafc; border:1px solid rgba(255,255,255,.12);
  border-radius:16px; box-shadow:0 12px 36px rgba(0,0,0,.5); padding:16px; }
.editor-box h3{ margin:0 0 8px; font-size:1.02rem; }
.editor-box .hint{ color:#cbd5e1; font-size:12.5px; margin:0 0 8px; }
#editor-input{ width:100%; min-height:210px; resize:vertical; background: rgba(15,18,28,.45); border:1px solid rgba(255,255,255,.18);
  color:#e5f0ff; border-radius:12px; padding:10px 12px; line-height:1.5; }

/* قفل العرض */
body.share .panel, body.share .editor, body.share #edit-actions { display: none !important; }
