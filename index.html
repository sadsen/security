<!DOCTYPE html>
<html lang="ar" dir="rtl">
  <head>
    <meta charset="utf-8" />
    <meta name="viewport" content="width=device-width, initial-scale=1" />
    <title>Security Map โ Share</title>

    <!-- Favicon (ุงุฎุชูุงุฑู) -->
    <link rel="icon" href="/favicon.ico" />

    <!-- Styles -->
    <link rel="stylesheet" href="css/style.css" />

    <!-- Fูallback ุจุณูุท ูุถูุงู ุงุฑุชูุงุน ุงูุฎุฑูุทุฉ ุญุชู ูู ุชุนุทู ุงูู CSS ุงูุฎุงุฑุฌู -->
    <style>
      #map{min-height:calc(100vh - 60px);}
      @media (max-width:640px){#map{min-height:calc(100vh - 56px);}}
    </style>
  </head>
  <body>
    <div id="app">
      <!-- ุงูุดุฑูุท ุงูุนููู -->
      <header class="topbar">
        <div class="brand">
          <img
            src="https://upload.wikimedia.org/wikipedia/commons/thumb/4/4c/Diriyah_Company_Logo.svg/512px-Diriyah_Company_Logo.svg.png"
            alt="Diriyah" class="brand-logo" />
          <div class="brand-text">
            <strong>Security & Traffic Map</strong>
            <span class="mode-badge">Share</span>
          </div>
        </div>

        <div class="controls">
          <button id="btnRoadmap" class="btn" aria-pressed="true">ุทุฑู</button>
          <button id="btnSatellite" class="btn" aria-pressed="false">ููุฑ ุตูุงุนู</button>
          <button id="btnTraffic" class="btn" aria-pressed="false">ุญุฑูุฉ ุงููุฑูุฑ</button>
          <button id="btnRecipients" class="btn secondary" title="ุชุนุฏูู ุงููุณุชูููู">ุงููุณุชูููู</button>
        </div>
      </header>

      <!-- ุงูุฎุฑูุทุฉ -->
      <div id="map" role="application" aria-label="ุฎุฑูุทุฉ ุชูุงุนููุฉ"></div>

      <!-- ูุฑุช ุงููุนูููุงุช -->
      <aside id="infoCard" class="info-card hidden" role="dialog" aria-live="polite">
        <div class="info-header">
          <img
            src="https://upload.wikimedia.org/wikipedia/commons/thumb/4/4c/Diriyah_Company_Logo.svg/512px-Diriyah_Company_Logo.svg.png"
            alt="Diriyah" class="info-logo" />
          <div class="info-titles">
            <h3 id="infoTitle">โ</h3>
            <p id="infoSubtitle" class="muted">โ</p>
          </div>
          <button id="pinCard" class="icon-btn" title="ุชุซุจูุช ุงููุฑุช">๐</button>
          <button id="closeCard" class="icon-btn" title="ุฅุบูุงู">โ</button>
        </div>
        <div class="info-body">
          <ul class="info-list">
            <li><strong>ุงูุฅุญุฏุงุซูุงุช:</strong> <span id="infoLatLng">โ</span></li>
            <li><strong>ูุตู ุงููุทุฑ:</strong> <span id="infoRadius">15 ู</span></li>
            <li id="infoNotesRow" class="hidden"><strong>ููุงุญุธุงุช:</strong> <span id="infoNotes">โ</span></li>
          </ul>
        </div>
      </aside>

      <!-- ูุญุฑูุฑ ุงููุณุชูููู -->
      <div id="recipientsModal" class="modal hidden" aria-hidden="true" role="dialog">
        <div class="modal-content">
          <div class="modal-header">
            <h3>ุชุนุฏูู ุงููุณุชูููู</h3>
          </div>
          <div class="modal-body">
            <label for="recipientsInput" class="lbl">ุฃุฏุฎู ุงูุจุฑูุฏ/ุงูุฃุฑูุงู (ููุตููุฉ ุจููุงุตู):</label>
            <textarea id="recipientsInput" rows="5" class="txt"></textarea>
            <p class="hint">ูุชู ุงูุญูุธ ูุญูููุง ูููุถูููู ุฃูุถูุง ุฏุงุฎู ุฑุงุจุท ุงููุดุงุฑูุฉ ุงููุฎุชุตุฑ.</p>
          </div>
          <div class="modal-actions">
            <button id="saveRecipients" class="btn">ุญูุธ</button>
            <button id="cancelRecipients" class="btn secondary">ุฅูุบุงุก</button>
          </div>
        </div>
      </div>

      <!-- ุฅุดุนุงุฑ -->
      <div id="toast" class="toast hidden"></div>
    </div>

    <!-- 1) ุญููู main.js ุฃููุงู -->
    <script src="js/main.js" defer></script>

    <!-- 2) ุจุนุฏูุง ุฎุฑุงุฆุท Google ูุน callback (ููุน ุณุจุงู ุงูุชุญููู) -->
    <script
      src="https://maps.googleapis.com/maps/api/js?key=AIzaSyCjX9UJKG53r5ymGydlWEMNbuvi234LcC8&libraries=geometry&callback=initMap"
      defer
    ></script>
  </body>
</html>
